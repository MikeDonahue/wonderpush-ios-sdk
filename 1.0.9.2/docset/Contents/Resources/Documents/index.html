<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>WonderPush Reference</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.2 (build 963)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="index.html">WonderPush </a></h1>
				<a id="developerHome" href="index.html">WonderPush</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">WonderPush Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">WonderPush Reference</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
						
						
						<h2>WonderPush iOS SDK Guide</h2>

<h1>1. Register your application in WonderPush</h1>

<p>Log in or sign up on <a href="http://www.wonderpush.com">WonderPush</a>.</p>

<p>Create your application.
Make sure to check <code>iOS</code> under the <code>Platforms</code> section.</p>

<p>Grab your <em>client id</em> and <em>client secret</em> under ther <code>Settings / Keys</code> menu.</p>

<h1>2. Download the latest WonderPush SDK for iOS</h1>

<p>Download the latest release <a href="https://github.com/wonderpush/wonderpush-ios-sdk/releases/latest">on GitHub</a>.</p>

<h1>3. Setup your project</h1>

<ul>
<li>Extract <code>WonderPush.framework</code> from the downloaded archive.</li>
<li>Drag and drop the <code>WonderPush.framework</code> file to your project.</li>
<li>Select your project file in the project navigator.</li>
<li>On the top right side select <code>General</code>.</li>
<li><p>Scroll down to <code>Linked Frameworks and libraries</code> and click on the plus to add the following frameworks:</p>

<ul>
<li>SystemConfiguration</li>
<li>MobileCoreServices</li>
<li>CoreGraphics</li>
<li>UIKit</li>
<li>CoreTelephony</li>
<li>CoreLocation</li>
<li>CoreBluetooth</li>
<li>AVFoundation</li>
<li>CoreMotion</li>
</ul>
</li>
</ul>


<h1>4. Initialize the SDK</h1>

<p>Add this code to the corresponding method of you Application delegate:</p>

<pre><code>#import &lt;WonderPush/WonderPush.h&gt;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [WonderPush setClientId:@"[YOUR_CLIENT_ID]" secret:@"[YOUR_CLIENT_SECRET]"];
    [WonderPush setNotificationEnabled:YES];
    [WonderPush handleApplicationLaunchWithOption:launchOptions];
    return YES;
}
</code></pre>

<p>Replace:</p>

<ul>
<li><strong>[YOUR_CLIENT_ID]</strong> with your client id found in your <a href="https://dashboard.wonderpush.com/">WonderPush dashboard</a>, under the <code>Settings / Keys</code> menu.
Eg.: 0123456789abcdef0123456789abcdef01234567.</li>
<li><strong>[YOUR_CLIENT_ID]</strong> with your client secret found in your <a href="https://dashboard.wonderpush.com/">WonderPush dashboard</a>, next to the client id as described above.
Eg.: 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef.</li>
</ul>


<h1>5. Handle remote notification</h1>

<p>First of all you have to set up your application as described in the <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/ConfiguringPushNotifications/ConfiguringPushNotifications.html#//apple_ref/doc/uid/TP40012582-CH32-SW1">Configuring Push Notifications guide</a>.</p>

<p>Once you created your provisioning profile associated to a certificate on your computer you will have to export your certificate
in order to let WonderPush to send notification to your device:</p>

<ul>
<li>Launch KeyChains</li>
<li>Select the newly created certificate associated to your appId.</li>
<li>Click on <code>File / Export items</code>.</li>
<li>Do not enter any password.</li>
<li>Open a command line and go to the directory where you exported the certificate.</li>
<li><p>Type the following command to generate the <code>.pem</code> file:</p>

<pre><code>openssl pkcs12 -nodes -clcerts -out [name].pem -in [previously explorted file].p12
</code></pre></li>
<li><p>Again, type no password when asked.</p></li>
</ul>


<p>Then go to your <a href="https://dashboard.wonderpush.com/">WonderPush dashboard</a> and upload the certificate in the <code>Settings / Keys</code> page of your application management</p>

<p>In order to handle push notifications, you will have to modify your Application delegate so that all notifications will be forwarded to the WonderPush SDK.
Add the following methods:</p>

<pre><code>-(void) application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    [WonderPush didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}

-(void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    [WonderPush handleDidReceiveRemoteNotification:userInfo];
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
    [WonderPush applicationDidEnterBackground:application];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
    [WonderPush applicationDidBecomeActive:application];
}
</code></pre>

<p>That&rsquo;s it you should now be able to receive push notifications from WonderPush.</p>

<h1>6. Handling background mode</h1>

<p><em>Note:</em> If your application does not use the Remote notifications Background mode, you can safely skip this step.<br/>
If in doubt, click your project in the project navigator, select a target, go to the <code>Capabilities</code> tab, and under <code>Background modes</code>, see whether <code>Remote notifications</code> is checked.</p>

<p>If your applications uses the Remote notification Background mode, the behaviour of the notification is not exactly the same.
In order to make WonderPush work in this case, two methods must be overloaded in your application delegate as follow:</p>

<pre><code>- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    [WonderPush handleNotification:notification.userInfo];
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))handler
{
    [WonderPush handleNotificationReceivedInBackground:userInfo];
    handler(UIBackgroundFetchResultNewData
}
</code></pre>

<p>Your application now correctly receives push notifications.</p>

<h1>7. Using the SDK in your iOS application</h1>

<h3>Track your first event</h3>

<p>The SDK automatically tracks genetic events. This is probably insufficient to help you analyze, segment and notify users properly.
You will want to track events that make sense for your business, here is an simple example:</p>

<pre><code>[WonderPush trackEvent:"customized_interests" withData:nil];
</code></pre>

<p>This would permit you to know easily whether a user kept the default set of &ldquo;topics of interests&rdquo;, say in a newsstand application, or if they already chose a topics that represents well their center of interest.</p>

<p>Your notification strategy could be to incite to customization for the lazy users, whereas you could engage in a more personalized communication with the users you performed the <code>customized_interests</code> event.</p>

<h3>Enriching the events</h3>

<p>Events can host a rich set of properties that WonderPush indexes to permit you to filter users based on finer criteria.
To do so, simply give a JSON object as second parameter. Here is an example:</p>

<pre><code>[WonderPush trackEvent:"browse_catalog" withData:@{"string_category": @"fashion"}];
</code></pre>

<p>Using this information, you could notify customers on new items for the categories that matters most to them.</p>

<p>Here is another example:</p>

<pre><code>[WonderPush trackEvent:"purchase" withData:@{@"int_foo": [NSNumber numberWithInt:3], @"float_amount": [NSNumber numberWithFloat:59.98]}];
</code></pre>

<p>You could choose to thank customer for every purchase, or you could take advantage of the purchase amount to give differentiated coupons to best buyers.</p>

<h3>Tagging users</h3>

<p>Some information are better represented as properties on a user, rather than discrete events in a timeline.
Here is an example:</p>

<pre><code>- (void)didAddItemToCart:(NSString*)item withPrice:(double)price
{
    // Variables managed by your application
    cartItems += 1;
    cartAmount += price;
    // ...

    // Update this information in WonderPush
    [WonderPush putInstallationCustomProperties:@{@"int_itemsInCart": [NSNumber numberWithInt:cartItems],
                                                  @"float_cartAmount": [NSNumber numberWithFloat:cartAmount]}];
}

- (void)didPurchase {
    // Empty the information in WonderPush
    [WonderPush putInstallationCustomProperties:@{@"int_itemsInCart": [NSNull null],
                                                  @"float_cartAmount": [NSNull null]}];
}
</code></pre>

<p>Inactive users with non-empty carts could then easily be notified. Combined with a free delivery coupon for carts above a given amount, your conversion rate will improve still!</p>

<h2>API Reference</h2>

<p>Take a look at the methods exposed by the <a href="Classes/WonderPush.html">WonderPush</a> class.</p>
						
						
					</div>
					
                        
                    
					
					
					<div class="index-column">
						<h2 class="index-title">Class References</h2>
						<ul>
							
							<li><a href="Classes/WonderPush.html">WonderPush</a></li>
							
						</ul>
					</div>
					
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2014 WonderPush. All rights reserved. (Last updated: 2014-12-02)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2 (build 963)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>